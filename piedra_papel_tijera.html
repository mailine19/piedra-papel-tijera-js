<!DOCTYPE HTML>
<html lang="es"> 
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <title>Piedra, Papel o Tijera</title>
        <style>
            /* Estilos básicos para que los botones se vean mejor */
            body { 
                font-family: Arial, sans-serif; 
                text-align: center; 
                background-color: #f4f4f9;
                padding: 20px;
            }
            h1 {
                color: #333;
            }
            button { 
                padding: 12px 25px; 
                margin: 8px; 
                font-size: 18px; 
                cursor: pointer; 
                border: none;
                border-radius: 8px;
                background-color: #007bff;
                color: white;
                transition: background-color 0.3s;
            }
            button:hover {
                background-color: #0056b3;
            }
            #mensajes { 
                margin: 20px auto; 
                padding: 15px; 
                border: 2px solid #ccc; 
                min-height: 50px; 
                width: 80%;
                max-width: 500px;
                background-color: white;
                border-radius: 10px;
            }
            .score { 
                font-size: 1.3em; 
                font-weight: bold; 
                margin-top: 20px; 
                color: #555;
            }
        </style>
    </head>
    <body>  
        <h1>Piedra, Papel o Tijera</h1>
        <hr>

        <h2>Elige tu jugada:</h2>
        <button id="btn-piedra" onclick="jugar(1)">Piedra 🪨</button>
        <button id="btn-tijera" onclick="jugar(2)">Tijera ✂️</button>
        <button id="btn-papel" onclick="jugar(3)">Papel 📄</button>
        
        <div class="score">
            Victorias: <span id="triunfos">0</span> | Derrotas: <span id="derrotas">0</span>
        </div>
        <div id="mensajes">
            ¡Haz tu primera elección para empezar el juego!
        </div>

        <script>
            // Variables globales
            let triunfos = 0;
            let derrotas = 0;
            const PUNTUACION_MAXIMA = 3;

            // Función de apoyo para números aleatorios
            function aleatorio(min, max) {
                return Math.floor(Math.random() * (max - min + 1) + min);
            }
            
            // Función para traducir el número a texto y emoji
            function eleccion(jugada) {
                if (jugada === 1) return "Piedra 🪨";
                if (jugada === 2) return "Tijera ✂️";
                if (jugada === 3) return "Papel 📄";
                return "Opción no válida";
            }

            // Función para actualizar el marcador en el HTML (DOM)
            function actualizarMarcador() {
                document.getElementById("triunfos").innerText = triunfos;
                document.getElementById("derrotas").innerText = derrotas;
            }

            // Función para desactivar los botones al final del juego
            function desactivarBotones() {
                document.getElementById("btn-piedra").disabled = true;
                document.getElementById("btn-tijera").disabled = true;
                document.getElementById("btn-papel").disabled = true;
            }


            // Función principal que se llama al hacer clic en un botón
            function jugar(jugador) {
                // 1. Verificar si el juego terminó
                if (triunfos >= PUNTUACION_MAXIMA || derrotas >= PUNTUACION_MAXIMA) {
                    // Si el juego terminó, solo alertamos y salimos
                    alert("El juego ha terminado. Recarga la página para jugar de nuevo.");
                    return;
                }

                // 2. Generar jugada de la PC
                let pc = aleatorio(1, 3);
                
                // Texto de la ronda actual
                let mensaje = `PC elige: <strong>${eleccion(pc)}</strong><br>Jugador elige: <strong>${eleccion(jugador)}</strong><br><hr style="margin: 5px 0;">`;

                // 3. COMBATE
                let resultadoRonda = "";
                if (pc === jugador) {
                    resultadoRonda = "¡EMPATE! 🤝";
                } else if (
                    (jugador === 1 && pc === 2) || // Piedra vs Tijera
                    (jugador === 2 && pc === 3) || // Tijera vs Papel
                    (jugador === 3 && pc === 1)    // Papel vs Piedra
                ) {
                    triunfos++; 
                    resultadoRonda = "¡GANASTE LA RONDA! 🎉";
                } else {
                    derrotas++;
                    resultadoRonda = "¡PERDISTE LA RONDA! 😢";
                }

                // 4. Mostrar resultado
                document.getElementById("mensajes").innerHTML = mensaje + `<strong style="font-size: 1.1em;">Resultado: ${resultadoRonda}</strong>`;
                actualizarMarcador();

                // 5. Verificar si el juego terminó
                if (triunfos === PUNTUACION_MAXIMA || derrotas === PUNTUACION_MAXIMA) {
                    let mensajeFinal = triunfos === PUNTUACION_MAXIMA 
                        ? "¡FELICITACIONES! Eres el CAMPEÓN. 🏆" 
                        : "Lo siento, la PC ganó la partida. 🤖";
                    
                    alert("--- JUEGO TERMINADO ---\n" + mensajeFinal);
                    
                    // Desactivar botones para evitar más clics
                    desactivarBotones();
                }
            }

            // Inicializar el marcador al cargar la página
            actualizarMarcador();
        </script>
    </body>
</html>
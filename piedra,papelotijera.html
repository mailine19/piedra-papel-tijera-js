<!DOCTYPE HTML>
<html lang="es"> 
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <title>Piedra, Papel o Tijera</title>
        <style>
            /* Estilos básicos para que los botones se vean mejor */
            body { font-family: sans-serif; text-align: center; }
            button { padding: 10px 20px; margin: 5px; font-size: 16px; cursor: pointer; }
            #mensajes { margin-top: 20px; padding: 10px; border: 1px solid #ccc; min-height: 50px; }
            .score { font-size: 1.2em; font-weight: bold; margin-top: 15px; }
        </style>
    </head>
    <body>  
        <h1>Piedra, Papel o Tijera</h1>
        <hr>

        <h2>Elige tu jugada:</h2>
        <button onclick="jugar(1)">Piedra 🪨</button>
        <button onclick="jugar(2)">Tijera ✂️</button>
        <button onclick="jugar(3)">Papel 📄</button>
        
        <div class="score">
            Victorias: <span id="triunfos">0</span> | Derrotas: <span id="derrotas">0</span>
        </div>
        <div id="mensajes">
            ¡Haz tu primera elección para empezar el juego!
        </div>

        <script>
            // Variables globales
            let triunfos = 0;
            let derrotas = 0;
            const PUNTUACION_MAXIMA = 3;

            // Función de apoyo para números aleatorios
            function aleatorio(min, max) {
                return Math.floor(Math.random() * (max - min + 1) + min);
            }
            
            // Función para traducir el número a texto y emoji
            function eleccion(jugada) {
                if (jugada == 1) return "Piedra 🪨";
                if (jugada == 2) return "Tijera ✂️";
                if (jugada == 3) return "Papel 📄";
                return "Opción no válida";
            }

            // Función para actualizar el marcador en el HTML
            function actualizarMarcador() {
                document.getElementById("triunfos").innerText = triunfos;
                document.getElementById("derrotas").innerText = derrotas;
            }

            // Función principal que se llama al hacer clic en un botón
            function jugar(jugador) {
                // 1. Verificar si el juego terminó
                if (triunfos >= PUNTUACION_MAXIMA || derrotas >= PUNTUACION_MAXIMA) {
                    alert("El juego ha terminado. Recarga la página para jugar de nuevo.");
                    return;
                }

                // 2. Generar jugada de la PC
                let pc = aleatorio(1, 3);
                let mensaje = `PC elige: **${eleccion(pc)}**<br>Jugador elige: **${eleccion(jugador)}**<br><br>`;

                // 3. COMBATE
                let resultadoRonda = "";
                if (pc === jugador) {
                    resultadoRonda = "¡EMPATE! 🤝";
                } else if ((jugador === 1 && pc === 2) || (jugador === 2 && pc === 3) || (jugador === 3 && pc === 1)) {
                    // Ganaste: Piedra(1) gana a Tijera(2), Tijera(2) gana a Papel(3), Papel(3) gana a Piedra(1)
                    triunfos++; 
                    resultadoRonda = "¡GANASTE LA RONDA! 🎉";
                } else {
                    derrotas++;
                    resultadoRonda = "¡PERDISTE LA RONDA! 😢";
                }

                // 4. Mostrar resultado
                document.getElementById("mensajes").innerHTML = mensaje + `<strong>Resultado: ${resultadoRonda}</strong>`;
                actualizarMarcador();

                // 5. Verificar si el juego terminó
                if (triunfos === PUNTUACION_MAXIMA || derrotas === PUNTUACION_MAXIMA) {
                    let mensajeFinal = triunfos === PUNTUACION_MAXIMA 
                        ? "¡FELICITACIONES! Eres el CAMPEÓN." 
                        : "Lo siento, la PC ganó la partida.";
                    
                    alert("--- JUEGO TERMINADO ---\n" + mensajeFinal);
                    // Opcional: Desactivar botones aquí
                }
            }

            // Inicializar el marcador al cargar la página
            actualizarMarcador();
        </script>
    </body>
</html>